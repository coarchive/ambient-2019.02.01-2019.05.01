#!/usr/bin/env node

const e = '\u001b';
const c = `${e}[`;
const r = `${c}0m`;
const y = `${c}93m`;
const x = `${c}38;5;`;
const delimiter = process.platform === "win32" ? ";" : ":";

Object.keys(process.env).sort().forEach((key) => {
  let val = process.env[key];
  process.stdout.write(`${c}35m${key}${x}173m: `);
  if (val.includes(e)) {
    val = `${r}${val.replace(/(\033\[([\d;]+)m)/g, "$1\\033[$2m")}`;
  }
  if (val.includes(delimiter)) {
    console.log(`${x}122m ${y}[`);
    val.split(delimiter).forEach((path, idx, self) => {
      console.log(`${x}018m  ${path}${idx + 1 === self.length ? "" : `${x}074m,`}`);
    });
    console.log(`${y}]${r}`);
  } else {
    console.log(`${c}34m${val}${r}`);
  }
});
